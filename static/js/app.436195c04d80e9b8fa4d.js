webpackJsonp([1],{F3GD:function(t,e){},"J/NO":function(t,e){},JmVx:function(t,e){},KbwD:function(t,e){},NHnr:function(t,e,s){"use strict";function r(t){s("nctT")}function n(t){s("J/NO")}function a(t){s("F3GD")}function o(t){s("KbwD")}function i(t){s("YeJ3")}function l(t){s("h8Hj")}function c(t){s("V8nS")}Object.defineProperty(e,"__esModule",{value:!0});var u={};s.d(u,"getTable_all",function(){return Qt}),s.d(u,"getGoods",function(){return Zt}),s.d(u,"getOrderlist",function(){return qt}),s.d(u,"getOrders",function(){return Bt});var d=s("GIDf"),_={name:"app"},v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},f=[],p={render:v,staticRenderFns:f},b=p,h=s("kgPM"),m=r,g=h(_,b,!1,m,null,null),y=g.exports,N=s("byqf"),k={data:function(){return{}},computed:{urlIndex:function(){return this.$route.path}}},w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-menu",{staticClass:"leftnav",attrs:{"default-active":t.urlIndex,router:!0,"background-color":"#409EFF","text-color":"#878D99","active-text-color":"#fff"}},[s("el-menu-item",{attrs:{index:"/"}},[s("i",{staticClass:"iconfont icon-shouye1"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("首页")])]),t._v(" "),s("el-menu-item",{attrs:{index:"/table"}},[s("i",{staticClass:"iconfont icon-canzhuo1"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("餐桌")])]),t._v(" "),s("el-menu-item",{attrs:{index:"/total"}},[s("i",{staticClass:"iconfont icon-tongji1"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("统计")])])],1)],1)},C=[],T={render:w,staticRenderFns:C},x=T,O=s("kgPM"),$=n,L=O(k,x,!1,$,null,null),R=L.exports,D=(s("Q4e9"),{mounted:function(){var t=document.body.clientHeight;document.getElementById("leftNav").style.height=t+"px"},components:{leftNav:R}}),E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",[s("el-col",{attrs:{span:3}},[s("left-nav",{staticClass:"hidden-sm-and-down",attrs:{id:"leftNav"}})],1),t._v(" "),s("el-col",{attrs:{span:21}},[s("router-view")],1)],1)],1)},G=[],P={render:E,staticRenderFns:G},F=P,j=s("kgPM"),M=a,U=j(D,F,!1,M,null,null),S=U.exports,A={computed:{getTable_empty:function(){return this.$store.getters.getTable_all.filter(function(t){return"empty"==t.status})},getTable_using:function(){return this.$store.getters.getTable_all.filter(function(t){return"using"==t.status})}}},J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",[s("el-header"),t._v(" "),s("el-main",[s("el-row",{attrs:{gutter:20,type:"flex",justify:"center"}},[s("el-col",{attrs:{span:10}},[s("div",{staticClass:"bg-grey table_info"},[s("p",[s("span",[t._v(t._s(t.getTable_using.length))]),t._v("张餐桌使用中")]),t._v(" "),s("p",[s("span",[t._v(t._s(t.getTable_empty.length))]),t._v("张餐桌空余中")])])]),t._v(" "),s("el-col",{attrs:{span:8}},[s("router-link",{attrs:{to:"table"}},[s("el-button",{staticClass:"table_btn",attrs:{type:"primary"}},[s("i",{staticClass:"iconfont icon-canzhuo1"}),t._v(" "),s("span",[t._v("餐桌管理")])])],1)],1)],1)],1)],1)],1)},H=[],z={render:J,staticRenderFns:H},I=z,Y=s("kgPM"),V=o,Q=Y(A,I,!1,V,"data-v-52312a4e",null),Z=Q.exports,q=s("B2YR"),B=s.n(q),K=s("dXqY"),X={data:function(){return{orderList:[]}},methods:{orderList_add:function(t){var e=this.orderList.filter(function(e){return e.goodsName==t.goodsName}),s={goodsName:t.goodsName,price:t.price,count:1};""==e?this.orderList.push(s):this.orderList.forEach(function(e){e.goodsName==t.goodsName&&e.count++})},orderList_del:function(){this.$emit("order_close"),this.orderList=[],this.$message({message:"点餐取消！",type:"error"})},orderList_success:function(){this.$emit("order_success",this.orderList),this.$emit("order_close"),this.orderList=[],this.$message({message:"点餐成功！",type:"success"})},handleAdd:function(t,e){e.count++},handleDel:function(t,e){this.orderList.splice(t,1)}},computed:B()({},Object(K.b)(["getGoods"]),{getGoods1:function(){return this.$store.getters.getGoods.filter(function(t){return"凉粉系列"==t.category})},getGoods2:function(){return this.$store.getters.getGoods.filter(function(t){return"雪山系列"==t.category})},getGoods3:function(){return this.$store.getters.getGoods.filter(function(t){return"西米露系列"==t.category})},getGoods4:function(){return this.$store.getters.getGoods.filter(function(t){return"糕点系列"==t.category})}})},W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:8}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList,"max-height":"300"}},[s("el-table-column",{attrs:{prop:"goodsName",label:"商品名称",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{prop:"count",label:"数量",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{prop:"price",label:"金额",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.handleAdd(e.$index,e.row)}}},[t._v("增加")]),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.handleDel(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),s("div",{staticClass:"order_control_btn"},[s("el-button",{attrs:{type:"primary"},on:{click:t.orderList_success}},[t._v("完成点餐")]),t._v(" "),s("el-button",{attrs:{type:"danger"},on:{click:t.orderList_del}},[t._v("取消点餐")])],1)],1),t._v(" "),s("el-col",{attrs:{span:16}},[s("el-tabs",{staticStyle:{height:"390px"},attrs:{"tab-position":"right"}},[s("el-tab-pane",{attrs:{label:"凉粉系列"}},t._l(t.getGoods1,function(e,r){return s("ul",{key:r,staticClass:"goods_list"},[s("li",[s("el-button",{on:{click:function(s){t.orderList_add(e)}}},[t._v(t._s(e.goodsName)),s("span",[t._v("￥"+t._s(e.price))])])],1)])})),t._v(" "),s("el-tab-pane",{attrs:{label:"雪山系列"}},t._l(t.getGoods2,function(e,r){return s("ul",{key:r,staticClass:"goods_list"},[s("li",[s("el-button",{on:{click:function(s){t.orderList_add(e)}}},[t._v(t._s(e.goodsName)),s("span",[t._v("￥"+t._s(e.price))])])],1)])})),t._v(" "),s("el-tab-pane",{attrs:{label:"西米露系列"}},t._l(t.getGoods3,function(e,r){return s("ul",{key:r,staticClass:"goods_list"},[s("li",[s("el-button",{on:{click:function(s){t.orderList_add(e)}}},[t._v(t._s(e.goodsName)),s("span",[t._v("￥"+t._s(e.price))])])],1)])})),t._v(" "),s("el-tab-pane",{attrs:{label:"糕点系列"}},t._l(t.getGoods4,function(e,r){return s("ul",{key:r,staticClass:"goods_list"},[s("li",[s("el-button",{on:{click:function(s){t.orderList_add(e)}}},[t._v(t._s(e.goodsName)),s("span",[t._v("￥"+t._s(e.price))])])],1)])}))],1)],1)],1)],1)},tt=[],et={render:W,staticRenderFns:tt},st=et,rt=s("kgPM"),nt=i,at=rt(X,st,!1,nt,null,null),ot=at.exports,it={props:["totalPrice","activeTableNumber"],data:function(){return{}},computed:{},methods:B()({},Object(K.c)(["ADD_orders"]),{wechat_pay:function(){var t=this.activeTableNumber-1;this.ADD_orders(t),this.$message({message:"支付成功",type:"success"}),this.$emit("close_checkout")}})},lt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("p",[t._v("本次消费："),r("span",{staticClass:"totalPrice"},[t._v(t._s(this.totalPrice))])]),t._v(" "),r("p",[t._v("请选择支付方式：")]),t._v(" "),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("el-card",{staticClass:"wechat",nativeOn:{click:function(e){t.wechat_pay(e)}}},[r("i",{staticClass:"iconfont icon-weixinzhifu"}),t._v(" "),r("img",{staticClass:"QRcode",attrs:{src:s("d8xZ"),alt:""}}),t._v(" "),r("div",{staticClass:"bottom clearfix"})])],1)],1)],1)},ct=[],ut={render:lt,staticRenderFns:ct},dt=ut,_t=s("kgPM"),vt=l,ft=_t(it,dt,!1,vt,"data-v-f1f4b290",null),pt=ft.exports,bt={components:{"order-page":ot,checkout:pt},data:function(){return{showControl:!1,showOrder:!1,showCheckout:!1,activeTableNumber:0,activeName:"all",table_status:"",table_hasReserved:!1,table_isUsing:!1,orderList:[],totalPrice:0}},methods:{controlTable:function(t){this.showControl=!0,this.activeTableNumber=t.id,this.table_status=t.status,"using"==this.table_status?this.table_isUsing=!0:this.table_isUsing=!1,"reserved"==this.table_status?this.table_hasReserved=!0:this.table_hasReserved=!1},table_orderSuccess:function(t){this.orderList=t;var e=[this.activeTableNumber].concat(this.orderList);this.$store.commit("ON_Order",e),this.$store.commit("ON_Using",this.activeTableNumber),this.showControl=!1},controlOrder:function(){this.showOrder?this.showOrder=!1:this.showOrder=!0},close_controlDialog:function(){this.showControl=!1},getSummaries:function(t){var e=t.columns,s=t.data,r=[];return e.forEach(function(t,e){if(0===e)return void(r[e]="总价");var n=s.map(function(e){return Number(e[t.property])});n.every(function(t){return isNaN(t)})?r[e]="N/A":(r[e]=n.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0),r[2]+=" 元")}),this.totalPrice=r[2],r},checkout:function(){this.showCheckout?(this.showCheckout=!1,this.showControl=!1,this.$store.commit("ON_Empty",this.activeTableNumber)):this.showCheckout=!0}},computed:B()({},Object(K.b)(["getTable_all"]),{getTable_using:function(){return this.$store.getters.getTable_all.filter(function(t){return"using"==t.status})},getTable_reserved:function(){return this.$store.getters.getTable_all.filter(function(t){return"reserved"==t.status})},getTable_empty:function(){return this.$store.getters.getTable_all.filter(function(t){return"empty"==t.status})},getOrder:function(){var t=0;return t=0==this.activeTableNumber?0:this.activeTableNumber-1,this.$store.getters.getOrderlist(t)}})},ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("餐桌管理")]),t._v(" "),s("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"总览",name:"all"}},[s("el-row",{staticClass:"table_all"},t._l(t.getTable_all,function(e,r){return s("el-col",{key:r,attrs:{span:4}},[s("li",{staticClass:"table-item",class:e.status,on:{click:function(s){t.controlTable(e)}}},[s("span",[t._v(t._s(e.id))])])])}))],1),t._v(" "),s("el-tab-pane",{attrs:{label:"用餐中",name:"second"}},[s("el-row",{staticClass:"table_using"},t._l(t.getTable_using,function(e,r){return s("el-col",{key:r,attrs:{span:4}},[s("li",{staticClass:"table-item",class:e.status,on:{click:function(s){t.controlTable(e)}}},[s("span",[t._v(t._s(e.id))])])])}))],1),t._v(" "),s("el-tab-pane",{attrs:{label:"已预约",name:"third"}},[s("el-row",{staticClass:"table_reserved"},t._l(t.getTable_reserved,function(e,r){return s("el-col",{key:r,attrs:{span:4}},[s("li",{staticClass:"table-item",class:e.status,on:{click:function(s){t.controlTable(e)}}},[s("span",[t._v(t._s(e.id))])])])}))],1),t._v(" "),s("el-tab-pane",{attrs:{label:"空余中",name:"fourth"}},[s("el-row",{staticClass:"table_empty"},t._l(t.getTable_empty,function(e,r){return s("el-col",{key:r,attrs:{span:4}},[s("li",{staticClass:"table-item",class:e.status,on:{click:function(s){t.controlTable(e)}}},[s("span",[t._v(t._s(e.id))])])])}))],1)],1),t._v(" "),s("el-dialog",{staticClass:"tableControl_dialog",attrs:{title:this.activeTableNumber+"号餐桌操作",visible:t.showControl,width:"30%",center:""},on:{"update:visible":function(e){t.showControl=e}}},[t._t("default",[s("p",[t._v("\n              当前状态:\n              "),this.table_isUsing?s("span",{staticClass:"using"},[t._v("用餐中")]):t._e(),t._v(" "),this.table_hasReserved?s("span",{staticClass:"reserved"},[t._v("已预约")]):t._e(),t._v(" "),this.table_isUsing||this.table_hasReserved?t._e():s("span",{staticClass:"empty"},[t._v("空余中")])]),t._v(" "),t.table_isUsing?s("el-table",{staticStyle:{"margin-bottom":"20px"},attrs:{data:t.getOrder,"max-height":"250","show-summary":"","summary-method":t.getSummaries}},[s("el-table-column",{attrs:{prop:"goodsName",label:"商品名称",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{prop:"count",label:"数量",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{prop:"price",label:"金额（元）",align:"center"}})],1):t._e(),t._v(" "),t.table_isUsing?t._e():s("div",{staticClass:"reserved_btn",on:{click:t.close_controlDialog}},[this.table_hasReserved?t._e():s("el-button",{staticClass:"onReserved",on:{click:function(e){t.$store.commit("ON_Reserved",t.activeTableNumber)}}},[t._v("预约餐桌")]),t._v(" "),this.table_hasReserved?s("el-button",{on:{click:function(e){t.$store.commit("ON_Empty",t.activeTableNumber)}}},[t._v("取消预约")]):t._e()],1),t._v(" "),this.table_isUsing?t._e():s("el-button",{attrs:{type:"primary"},on:{click:t.controlOrder}},[t._v("立即点餐")]),t._v(" "),this.table_isUsing?s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showCheckout=!0}}},[t._v("结账")]):t._e(),t._v(" "),this.table_isUsing?s("el-button",{on:{click:t.controlOrder}},[t._v("继续点餐")]):t._e()])],2),t._v(" "),s("el-dialog",{staticClass:"order_dialog",attrs:{visible:t.showOrder,width:"100%",top:"10vh",center:"","show-close":!1,"close-on-click-modal":!1,title:this.activeTableNumber+"号餐桌点餐中"},on:{"update:visible":function(e){t.showOrder=e}}},[t._t("default",[s("order-page",{attrs:{orderlist:t.getOrder},on:{order_close:t.controlOrder,order_success:t.table_orderSuccess}})])],2),t._v(" "),s("el-dialog",{attrs:{visible:t.showCheckout,width:"50%"},on:{"update:visible":function(e){t.showCheckout=e}}},[s("checkout",{attrs:{totalPrice:this.totalPrice,activeTableNumber:this.activeTableNumber},on:{close_checkout:t.checkout}})],1)],1)},mt=[],gt={render:ht,staticRenderFns:mt},yt=gt,Nt=s("kgPM"),kt=c,wt=Nt(bt,yt,!1,kt,"data-v-6b125dac",null),Ct=wt.exports,Tt={computed:B()({},Object(K.b)(["getOrders"]))},xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._l(t.getOrders,function(e,r){return s("el-card",{key:r},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[t._v("第"+t._s(r+1)+"单")]),t._v(" "),s("span",[t._v(t._s(e.time))])]),t._v(" "),t._l(e.order,function(e,r){return s("ul",{key:r},[s("li",[t._v(t._s(e.goodsName))])])})],2)}),t._v("\r\n    "+t._s(t.getOrders)+"\r\n")],2)},Ot=[],$t={render:xt,staticRenderFns:Ot},Lt=$t,Rt=s("kgPM"),Dt=Rt(Tt,Lt,!1,null,null,null),Et=Dt.exports,Gt={components:{totalOrders:Et}},Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",[s("el-aside",{attrs:{width:"200px"}},[t._v("Aside")]),t._v(" "),s("el-main",[s("total-orders")],1)],1)],1)},Ft=[],jt={render:Pt,staticRenderFns:Ft},Mt=jt,Ut=s("kgPM"),St=Ut(Gt,Mt,!1,null,null,null),At=St.exports;d.default.use(N.a);var Jt,Ht=new N.a({routes:[{path:"/",component:S,children:[{path:"/",name:"Index",component:Z},{path:"/table",name:"TableDetails",component:Ct},{path:"/total",name:"TotalDetails",component:At}]}]}),zt=s("n51Z"),It=s.n(zt),Yt=(s("JmVx"),{table:[{id:1,status:"empty",orderlist:[]},{id:2,status:"empty",orderlist:[]},{id:3,status:"reserved",orderlist:[]},{id:4,status:"empty",orderlist:[]},{id:5,status:"empty",orderlist:[]},{id:6,status:"empty",orderlist:[]},{id:7,status:"empty",orderlist:[]},{id:8,status:"empty",orderlist:[]},{id:9,status:"empty",orderlist:[]},{id:10,status:"empty",orderlist:[]}],goods:[{goodsName:"椰汁凉粉",category:"凉粉系列",price:19},{goodsName:"西瓜凉粉",category:"凉粉系列",price:19},{goodsName:"芒果凉粉",category:"凉粉系列",price:28},{goodsName:"鲜杂果凉粉",category:"凉粉系列",price:33},{goodsName:"雪山榴莲",category:"雪山系列",price:39},{goodsName:"椰汁马豆糕",category:"糕点系列",price:16}],orders:[]}),Vt=Yt,Qt=function(t){return t.table},Zt=function(t){return t.goods},qt=function(t){return function(e){return t.table[e].orderlist}},Bt=function(t){return t.orders},Kt=s("hNT/"),Xt=s.n(Kt),Wt=(Jt={},Xt()(Jt,"ON_Reserved",function(t,e){t.table[e-1].status="reserved"}),Xt()(Jt,"ON_Empty",function(t,e){t.table[e-1].status="empty"}),Xt()(Jt,"ON_Using",function(t,e){t.table[e-1].status="using"}),Xt()(Jt,"ON_Order",function(t,e){var s=t.table[e[0]-1],r=e.slice(1),n=!1,a=0;if(s.orderlist.forEach(function(t){r.forEach(function(e,s){e.goodsName==t.goodsName&&(n=!0,t.count+=e.count,t.price+=e.price,a=s)})}),0==s.orderlist.length)s.orderlist=r;else if(n){var o=r.splice(a+1,1);s.orderlist=s.orderlist.concat(o)}else n||(s.orderlist=s.orderlist.concat(r))}),Xt()(Jt,"ADD_orders",function(t,e){var s=new Date,r=s.getFullYear(),n=s.getMonth()+1,a=s.getDate(),o=s.getHours(),i=s.getMinutes(),l=r+"/"+n+"/"+a+" "+o+":"+i,c={order:t.table[e].orderlist,time:l};t.orders.push(c),t.table[e].orderlist=[]}),Jt),te=Wt;d.default.use(K.a);var ee=new K.a.Store({state:Vt,getters:u,mutations:te});d.default.use(It.a),d.default.config.productionTip=!1,new d.default({el:"#app",router:Ht,store:ee,template:"<App/>",components:{App:y}})},Q4e9:function(t,e){},V8nS:function(t,e){},YeJ3:function(t,e){},d8xZ:function(t,e,s){t.exports=s.p+"static/img/wechat.753bbff.jpg"},h8Hj:function(t,e){},nctT:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.436195c04d80e9b8fa4d.js.map